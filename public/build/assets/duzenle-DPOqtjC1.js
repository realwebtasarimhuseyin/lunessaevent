var c=Object.defineProperty;var y=(n,e,a)=>e in n?c(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var l=(n,e,a)=>y(n,typeof e!="symbol"?e+"":e,a);import{a as u}from"./axios-upsvKRUO.js";import{u as m}from"./real-ZMtuIudR.js";import"./app-DeQrA2Ni.js";class k{constructor(){l(this,"sayfaYonetimGorseller",null);l(this,"froala",{});const{FormKontrol:e,FilePonds:a}=m();this.FormKontrol=e,this.FilePonds=a,this.init()}init(){this.SayfaYonetimFormElement()}SayfaYonetimFormElement(){const e=this;diller.forEach(a=>{e.froala[a]=new FroalaEditor(`#sayfaYonetimIcerik-${a}`,{imageDefaultDisplay:"inline",language:"tr",toolbarButtons:[["undo","redo","bold","italic","underline","strikeThrough","subscript","superscript"],["fontFamily","fontSize","textColor","backgroundColor","inlineClass","inlineStyle","lineHeight"],["paragraphFormat","align","formatOL","formatUL","outdent","indent"],["insertLink","insertImage","insertVideo","insertTable","specialCharacters","fileManager"],["clearFormatting","selectAll","html","alert","clear","insert","print","fullscreen"]],pluginsEnabled:["align","charCounter","codeBeautifier","codeView","colors","draggable","emoticons","entities","fontFamily","fontSize","image","inlineClass","inlineStyle","lineBreaker","link","lists","paragraphFormat","paragraphStyle","lineHeight","quote","specialCharacters","table","url","wordPaste","print","imageTUI","video","fullscreen"],imageInsertButtons:["imageByURL"],videoInsertButtons:["videoByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize","imageTUI"],events:{initialized:function(){typeof sayfaYonetimIcerik<"u"&&sayfaYonetimIcerik[a]&&this.html.set(sayfaYonetimIcerik[a])}}})}),e.sayfaYonetimResim=e.FilePonds("#sayfaYonetimResim",{allowMultiple:!1,maxFiles:1,labelIdle:'Resminizi Sürükleyip Bırakın veya <span class="filepond--label-action">Tarayıcıdan Ekleyin</span>',acceptedFileTypes:["image/png","image/jpeg","image/webp"],maxFileSize:"10MB"}),typeof resimUrl<"u"&&e.sayfaYonetimResim.addFile(resimUrl)}SayfaYonetimVeriler(){const e=this;let a=new FormData;diller.forEach(i=>{let r={[`icerik_${i}`]:e.froala[i].html.get(),[`sayfaIcerikBaslik_${i}`]:$(`#sayfaYonetimForm #sayfaIcerikBaslik-${i}`).val(),[`metaBaslik_${i}`]:$(`#sayfaYonetimForm #metaBaslik-${i}`).val(),[`metaIcerik_${i}`]:$(`#sayfaYonetimForm #metaIcerik-${i}`).val(),[`metaAnahtar_${i}`]:$(`#sayfaYonetimForm #metaAnahtar-${i}`).val()};a.append(`${i}`,JSON.stringify(r))}),$("#sayfaYonetimForm #durum").is(":checked")?a.append("durum",1):a.append("durum",0);let t=e.sayfaYonetimResim.getFiles();return t.length>0&&a.append("resim",t[0].file),a}SayfaYonetimFormKontrol(){const e=this,a="sayfaYonetimForm";let t={icerik:e.froala[varsayilanDil].html.get(),sayfaIcerikBaslik:$(`#sayfaYonetimForm #sayfaIcerikBaslik-${varsayilanDil}`).val(),metaBaslik:$(`#sayfaYonetimForm #metaBaslik-${varsayilanDil}`).val(),metaIcerik:$(`#sayfaYonetimForm #metaIcerik-${varsayilanDil}`).val(),metaAnahtar:$(`#sayfaYonetimForm #metaAnahtar-${varsayilanDil}`).val()};const i=[{label:"İçerik",name:`icerik-${varsayilanDil}`,value:t.icerik,required:!0},{label:"Başlık",name:`sayfaIcerikBaslik-${varsayilanDil}`,value:t.sayfaIcerikBaslik,required:!0},{label:"Meta Başlık",name:`metaBaslik-${varsayilanDil}`,value:t.metaBaslik,required:!0},{label:"Meta Anahtar",name:`metaAnahtar-${varsayilanDil}`,value:t.metaAnahtar,required:!0},{label:"Meta İçerik",name:`metaIcerik-${varsayilanDil}`,value:t.metaIcerik,required:!0}];return e.FormKontrol().validate(a,i)}}const d=function(){const{FormGondermeOnay:n,FormYukleniyor:e,FormTamamlandi:a,Swall:t}=m(),i=new k,r=function(){i.SayfaYonetimFormKontrol()&&n("Sayfa Yonetim Düzenleniyor !").then(s=>{s.isConfirmed&&(e("Sayfa Yonetim Düzenleniyor..."),setTimeout(()=>{const f=i.SayfaYonetimVeriler();u.post(`${panelUrl}/sayfayonetim/duzenle/${slug}`,f,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>(a(o.data.mesaj),!0)).catch(function(o){t({icon:"error",icerik:"Lütfen tüm alanları doldurup tekrar deneyiniz !",onayButonİcerik:"Tamam"})})},500))})};return{init:function(){$("#sayfaYonetimBtnCnt").on("click","#sayfaYonetimBtnSbt",function(){return r()})}}}();document.addEventListener("DOMContentLoaded",n=>{d.init()});
