var b=Object.defineProperty;var A=(n,a,e)=>a in n?b(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e;var t=(n,a,e)=>A(n,typeof a!="symbol"?a+"":a,e);import{a as K}from"./axios-upsvKRUO.js";import{u as I}from"./real-ZMtuIudR.js";import{I as u}from"./form-BX-7WjtY.js";class T{constructor(){t(this,"urunAnaGorsel",null);t(this,"urunGorseller",null);t(this,"froala",{});t(this,"FormId","urunForm");const{FormKontrol:a,FilePonds:e}=I();this.FormKontrol=a,this.FilePonds=e,this.init()}init(){this.UrunFormElement(),$(".masked-input-sayi").each(function(){$(this).data("masked")||(u(this,{mask:Number,scale:2,signed:!1,radix:",",thousandsSeparator:".",mapToRadix:["."]}),$(this).data("masked",!0))}),$(".masked-input-indirim").each(function(){u(this,{mask:Number,scale:2,signed:!1,min:0,max:100,radix:",",thousandsSeparator:"."})})}UrunFormElement(){const a=this;diller.forEach(e=>{a.froala[e]=new FroalaEditor(`#urunIcerik-${e}`,{imageDefaultDisplay:"inline",language:"tr",toolbarButtons:[["undo","redo","bold","italic","underline","strikeThrough","subscript","superscript"],["fontFamily","fontSize","textColor","backgroundColor","inlineClass","inlineStyle","lineHeight"],["paragraphFormat","align","formatOL","formatUL","outdent","indent"],["insertLink","insertImage","insertVideo","insertTable","specialCharacters","fileManager"],["clearFormatting","selectAll","html","alert","clear","insert","print","fullscreen"]],pluginsEnabled:["align","charCounter","codeBeautifier","codeView","colors","draggable","emoticons","entities","fontFamily","fontSize","image","inlineClass","inlineStyle","lineBreaker","link","lists","paragraphFormat","paragraphStyle","lineHeight","quote","specialCharacters","table","url","wordPaste","print","imageTUI","video","fullscreen"],imageInsertButtons:["imageByURL"],videoInsertButtons:["videoByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize","imageTUI"],events:{initialized:function(){typeof urunIcerik<"u"&&urunIcerik[e]&&this.html.set(urunIcerik[e])}}})}),a.urunAnaGorsel=a.FilePonds("#anaResim",{allowMultiple:!1,maxFiles:1,labelIdle:'Resminizi Sürükleyip Bırakın veya <span class="filepond--label-action">Tarayıcıdan Ekleyin</span>',acceptedFileTypes:["image/png","image/jpeg","image/webp"],maxFileSize:"10MB"}),a.urunGorseller=a.FilePonds("#normalResimler",{allowReorder:!0,allowMultiple:!0,labelIdle:'Dosyalarınızı Sürükleyip Bırakın veya <span class="filepond--label-action">Tarayıcıdan Ekleyin</span>',acceptedFileTypes:["image/png","image/jpeg","image/webp","application/pdf"],maxFileSize:"25MB"}),typeof anaResimUrl<"u"&&a.urunAnaGorsel.addFile(anaResimUrl),typeof normalResimlerUrl<"u"&&normalResimlerUrl.forEach(e=>{a.urunGorseller.addFile(e)}),$(`#${a.FormId}`).on("change","#urunKategori",function(){K.get(`${panelUrl}/urunaltkategori/liste`,{urunKategori:this.value},{}).then(e=>{let l="";$(`#${a.FormId} #urunAltKategori`).html(""),e.data.length>0&&(e.data.forEach(o=>{l+=`<option value="${o.id}">${o.isim}</option>`}),$(`#${a.FormId} #urunAltKategori`).html("<option value='' selected disabled>Ürün Alt Kategori Seç</option>").append(l))})}),$(`#${a.FormId}`).on("change","#indirimYuzde",function(e){this.value>0&&$('[name="indirimTutar"]').val("0").trigger("change")}),$(`#${a.FormId}`).on("change","#indirimTutar",function(e){this.value>0&&$('[name="indirimYuzde"]').val("0").trigger("change")}),$(`#${a.FormId}`).on("click","#kombinasyon-ekle",function(e){setTimeout(function(){$(".masked-input-sayi").each(function(){$(this).data("masked")||(u(this,{mask:Number,scale:2,signed:!1,radix:",",thousandsSeparator:".",mapToRadix:["."]}),$(this).data("masked",!0))})},500)})}UrunVeriler(){const a=this;let e=new FormData;const l=$("#urunForm #urunKategori").val(),o=$("#urunForm #urunAltKategori").val()?$("#urunForm #urunAltKategori").val():null,p=$("#urunForm #stokAdet").val().replace(/\./g,"").replace(/,/g,"."),c=$("#urunForm #stokKod").val(),k=$("#urunForm #kdvDurum").val(),g=$("#urunForm #birimFiyat").val().replace(/\./g,"").replace(/,/g,"."),v=$("#urunForm #kdvOran").val(),f=$("#urunForm #marka").val()?$("#urunForm #marka").val():null,F=$("#urunForm #indirimYuzde").val().replace(/\./g,"").replace(/,/g,"."),h=$("#urunForm #indirimTutar").val().replace(/\./g,"").replace(/,/g,".");diller.forEach(r=>{let i={[`baslik_${r}`]:$(`#urunForm #baslik-${r}`).val(),[`icerik_${r}`]:a.froala[r].html.get(),[`metaBaslik_${r}`]:$(`#urunForm #metaBaslik-${r}`).val(),[`metaIcerik_${r}`]:$(`#urunForm #metaIcerik-${r}`).val(),[`metaAnahtar_${r}`]:$(`#urunForm #metaAnahtar-${r}`).val()};e.append(`${r}`,JSON.stringify(i))}),e.append("urunKategoriId",l),e.append("urunAltKategoriId",o),e.append("stokAdet",p),e.append("stokKod",c),e.append("kdvDurum",k),e.append("birimFiyat",g),e.append("kdvOran",v),e.append("marka",f),e.append("indirimYuzde",F),e.append("indirimTutar",h);let s=a.urunAnaGorsel.getFiles();s.length>0&&e.append("anaResim",s[0].file);let m=a.urunGorseller.getFiles();m.length>0&&m.forEach((r,i)=>{e.append("normalResimler[]",r.file)});const y=$(".kombinasyon-satiri").map(function(){const r=$(this),i={varyantlar:[]};return r.find("select").each(function(){const d=$(this).val();d&&i.varyantlar.push(d)}),i.fiyat=r.find(".fiyat-input").val().replace(/\./g,"").replace(/,/g,"."),i.stokKod=r.find(".stok-kodu-input").val(),i.stokAdet=r.find(".stok-adeti-input").val().replace(/\./g,"").replace(/,/g,"."),i}).get();return e.append("kombinasyonlar",JSON.stringify(y)),$("#urunForm #ozelAlan1").is(":checked")?e.append("ozelAlan1",1):e.append("ozelAlan1",0),$("#urunForm #ozelAlan2").is(":checked")?e.append("ozelAlan2",1):e.append("ozelAlan2",0),$("#urunForm #durum").is(":checked")?e.append("durum",1):e.append("durum",0),e}UrunFormKontrol(){const a=this;let e={baslik:$(`#urunForm #baslik-${varsayilanDil}`).val(),icerik:a.froala[varsayilanDil].html.get(),metaBaslik:$(`#urunForm #metaBaslik-${varsayilanDil}`).val(),metaIcerik:$(`#urunForm #metaIcerik-${varsayilanDil}`).val(),metaAnahtar:$(`#urunForm #metaAnahtar-${varsayilanDil}`).val(),urunKategori:$("#urunForm #urunKategori").val(),stokAdet:$("#urunForm #stokAdet").val(),stokKod:$("#urunForm #stokKod").val(),kdvDurum:$("#urunForm #kdvDurum").val(),kdvOran:$("#urunForm #kdvOran").val(),birimFiyat:$("#urunForm #birimFiyat").val()};const l=[{label:"Başlık",name:`baslik-${varsayilanDil}`,value:e.baslik,required:!0},{label:"İçerik",name:`icerik-${varsayilanDil}`,value:e.icerik,required:!0},{label:"Meta Başlık",name:`metaBaslik-${varsayilanDil}`,value:e.metaBaslik,required:!0},{label:"Meta Anahtar",name:`metaAnahtar-${varsayilanDil}`,value:e.metaAnahtar,required:!0},{label:"Meta İçerik",name:`metaIcerik-${varsayilanDil}`,value:e.metaIcerik,required:!0},{label:"Ürün Kategori",name:"urunKategori",value:e.urunKategori,required:!0},{label:"Stok Adet",name:"stokAdet",value:e.stokAdet,required:!0},{label:"Stok Kod",name:"stokKod",value:e.stokKod,required:!0},{label:"Kdv Durum",name:"kdvDurum",value:e.kdvDurum,required:!0},{label:"Kdv Oran",name:"kdvOran",value:e.kdvOran,required:!0},{label:"Birim Fiyat",name:"birimFiyat",value:e.birimFiyat,required:!0}];return a.FormKontrol().validate(a.FormId,l)}}export{T as R};
